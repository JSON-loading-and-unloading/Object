<h1>역할, 책임, 협력</h1>

객체지향 페러다임의 관점에서 핵심은 역할, 책임, 협력이 있다.</br></br>

전 장에서 배운 클래스와 상속은 객체의 책임과 협력이 어느 정도 자리 잡은 후에 사용할 수 있는 구현 메커니즘일 뿐이다.</br>

<h3>협력</h3>


![KakaoTalk_Photo_2023-11-27-18-05-46 001jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/1a61e9b6-2c01-4915-ab7b-5bc956bd1f30)

객체들은 요청의 흐름을 따라 자신에게 분배된 로직을 실행하면서 애플리케이션의 전체 기능을 완성한다.</br>
다양한 객체들은 기능을 구현하기 위해 메시지를 주고 받으면서 상호작용한다.</br>
객체들이 애플리케이션의 기능을 구현하기  위해 수행하는 상호작용을 협력이라고한다.</br>
객체가 협력에 참여하기 위해 수행하는 로직은 책임이라고 부른다.</br>
객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 역을 구성한다.
</br></br>
❗️두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다.</br>
메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.
</br>
ex)</br>

![KakaoTalk_Photo_2023-11-27-18-05-46 002jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/041caaa8-75d5-48fe-943c-d6dbdf910f31)


위 그림에서 Screening은 Movie에 calculateMovieFee메시지를 전송함으로서 예매자 한 명의 요금 계산을 요청한다.</br>
=> Movie에게 처리를 위힘하는 이유는 요금을 계산하는데 필요한 기본 요금과 할인 정책을 잘 알고 있는 객체가 Movie이기 때문이다.</br></br>


‼️Movie가 자율적인 존재가 되기 위해서는 자신이 알고 있는 정보를 이용해 직접 요금을 계산해야 한다. 자신이 할 수 없는 일을 다른 객체에게 위임하면 협력에 참여하는 객체들의 전체적인 자율성을 향상시킬 수 있다.
</br>
정리</br>
 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 전송해서 협력을 요청한다.</br>
 메시지를 수신한 객체 역시 메시지를 처리하던 중에 직접 처리할 수 없는 정보나 행동이 필요한 경우 또 다른 객체에게 도움을 요청한다.</br>



 <h2>책임</h2>

 책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 개체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장이다.</br>

 책임은 크게 두 개로 분류된다.</br>

 1. 하는 것</br>
    - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
 2. 아는 것</br>
    - 사적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것


   ex) </br>
     Screening의 책임 : 영화를 예매하는 것</br>
     Movie의 책임     : 요금을 계산하는 것</br>


     screening은 영화를 예매해야하는데 이를 ❕하는것❕과 연관이 있다.</br>
     screening은 상영할 영화를 알고 있어야 한다. 이를 ❕아는것❕과 연관이 있다.</br></br>


     Movie는 예매 가격을 계산할 책임을 지는데 이는 ❕하는 것❕과 관련된 책임이다.</br>
     Movie는 가격과 어떤 할인 정책이 적용됐는지도 알아야하는데 이는 ❕아는 것❕과 관련된 책임이다.</br></br>


     중요한 사실은 아는 것과 하는 것이 밀접하게 연관돼 있다는 것이다.</br>
     객체는 자신이 맡은 책임을 수행하는 데 필요한 정보를 알고 있을 책임이 있다.</br>
     또한, 객체는 자신이 할 수 없는 작업을 도와줄 객체를 알고 잇을 책임이 있다.</br>
     어떤 책임을 수해하기 위해서는 그 책임을 수행하는 데 필요한 정보도 함께 알아야 할 책임이 있는 것이다.</br>
     => 이것은 객체에게 책임을 할당하기 위한 가장 기본적인 원칙에 대한 힌트를 제공함.</br>


      <h3>책임 할당</h3>

      객체들은 협력에 필요한 지식과 방법을 가장 잘 알고 있는 객체에게 도움을 요청해야한다.</br></br>

      📌객체가 책임을 수행하게 하는 유일한 방법은 메시지를 전송하는 것이므로 책임을 할당한다는 것은 메시지의 이름을 결정하는 것과 같다.</br>

     
![KakaoTalk_Photo_2023-11-29-14-14-45 001jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/9c6e1ef0-b457-458d-8b18-fbafddb5c91e)

      위 이미지에서 '영화를 예매하라' 라는 액션을 명령받는다.</br></br>

      하지만 영화를 예매하기 위한 정보를 가지려면 Screening이라는 객체에게 정보를 요청해야한다.</br>
      또한, 예매 가격을 계산해야한다.  Movie라는 객체에 계산과 할인정책을 알아야하므로 Movie객체에 메시지를 보낸다.</br>
      
      <h3>책임 주도 설계</h3>
      책임 주도 설계 과정</br></br>

      1. 시스템이 사용자에게 제공해야 하는 기능인 시스탬 책임을 파악한다.</br>
      2. 시스템 책임을 더 작은 책임으로 분할한다.</br>
      3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.</br>
      4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.</br>
      5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 된다.</br>

 <h3>메시지가 객체를 결정한다.</h3>

            메시지가 객체를 선탁하게 해야 하는 두 가지 중요한 이유</br></br>

            1. 객체가 최소한의 인터페이스를 가질 수 있게 된다.</br>
            => 필요한 메시지가 식별될 때까지 객체의 퍼블릭 인터페이스에 어떤 것도 추가하지 않기 때문에 객체는 애플리케이션이 크지도, 작지도 않은 꼭 필요한 크기의 퍼블릭 인터페이스를 가질 수 있다.</br>
            2. 객체가 충분히 추상적인 인터페이스를 가질 수 있게 된다.</br>
            => 객체의 인터페이스는 무엇을 하는지는 표현해야 하지만 어떻게 수행하는지를 노출해서는 안된다. 메시지는 외부의 객체가 요청하는 무엇인가를 의미하기 때문에 메시지를 먼저 식별하면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있다.</br>


 <h3>행동이 상태를 결정한다.</h3>

객체가 존재하는 이유는 협력에 참여하기 위해서다. 따라서 객체는 협력에 필요한 행동을 제공해야 한다.</br>
객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동이다.</br></br>


협력 관계 속에서 다른 객체에게 무엇을 제공해야 하고 다른 객체로부터 무엇을 얻어야 하는지를 고민해야만 훌륭한 책임을 수확할 수 있다.</br>
💥객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다. 협력이 객체의 행동을 결정하고 행동이 상태를 결정한다.!</br>

 <h2>역할</h2>

 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부른다.(협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는것이 좋다.)</br>

 "영화를 예매하다"에서</br>
 실제로</br>
 1. 영화를 예매할 수 있는 적절한 역할이 무엇인가를 찾기
 2. 역할을 수행할 객체로 Screening 인스턴스를 선택
    이 둘로 나뉜다.</br>


<h3>유연하고 재사용 가능한 협력</h3>

역할이라는 개념을 고려하지 않고 객체에게 책임을 할당한다고 가정.</br>


![KakaoTalk_Photo_2023-11-29-14-14-45 002jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/6c79cc0e-8ace-4969-85d4-73e622a5b7ee)

할인 정책 중 AmountDiscountpolicy와 PercentDiscountpolicy 이 둘로 나뉜다.</br>
하지만 이 방법으로 두 협력을 구현하면 코드가 중복되고 만다.</br></br>

따라서 객체라는 존재를 지우고 할인 요금을 계산하라는 메시지에 응답할 수 있는 대표자를 생각한다면 두 협력을 하나로 통합할 수 있을 것이다.</br>


![KakaoTalk_Photo_2023-11-29-14-14-45 003jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/5c47e618-69fa-41d9-9185-7f1d4244fd28)

‼️역할이 두 종류의 구체적인 객체를 포괄하는 추상화라는 점에 주목하자</br>
따라서, AmountDiscountpolicy와 PercentDiscountpolicy를 포괄할 수 있는 추상적인 이름을 부여해야 한다.

</br></br>
💯요점은 동일한 책임을 수행하는 역할을 기반으로 두 개의 협력을 하나로 통합할 수 있다는 것이다.</br>
따라서 역할을 이용하면 불필요한 중복 코드를 제거할 수 있다.</br>

<h3>객체 대 역할</h3>

역할은 객체가 참여할 수 있는 일종의 슬롯이다. </br>
따라서 유용하고 재사용 가능한 설계라는 문맥에서의 역할의 중요성은 아무리 강조해도 지나치지 않을 것이다.</br>

한 종류의 객체만 협력을 참여하는 상황에서 역할이라는 개념을 고려하는 것이 유용할까?</br>
=> 협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다. 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.</br>


![KakaoTalk_Photo_2023-11-29-14-14-45 004jpeg](https://github.com/JSON-loading-and-unloading/Object-Study/assets/106163272/bb8d0064-825b-4fbf-b2d8-1e97418b03c1)

협력은 역할들의 상호작용으로 구성되고, 협력을 구성하기 위해 역할에 적합한 객체가 선택되며, 객체는 클래스를 이용해 구현되고 생성된다.</br>






    
